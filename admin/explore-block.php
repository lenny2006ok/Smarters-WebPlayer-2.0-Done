<?php
/*
 * @ https://EasyToYou.eu - IonCube v11 Decoder Online
 * @ PHP 7.2
 * @ Decoder version: 1.0.4
 * @ Release: 01/09/2021
 */

session_start();
define("ADMINFILESDIRECTORY", dirname(dirname(__FILE__)) . "/");
if (file_exists(ADMINFILESDIRECTORY . "connection.php")) {
    include_once ADMINFILESDIRECTORY . "connection.php";
}
if (file_exists(ADMINFILESDIRECTORY . "lib/Admin/AdminContoller.php")) {
    include_once ADMINFILESDIRECTORY . "lib/Admin/AdminContoller.php";
}
if (file_exists(ADMINFILESDIRECTORY . "lib/Admin/Controller.php")) {
    include_once ADMINFILESDIRECTORY . "lib/Admin/Controller.php";
}
if (file_exists(ADMINFILESDIRECTORY . "admin/includes/functions.php")) {
    include_once ADMINFILESDIRECTORY . "admin/includes/functions.php";
}
if (file_exists(ADMINFILESDIRECTORY . "lib/Common/CommonController.php")) {
    include_once ADMINFILESDIRECTORY . "lib/Common/CommonController.php";
}
$DatabaseObj = new DBConnect();
$controlfunctions = new controlfunctions();
$conn = $DatabaseObj->makeconnection();
$CommonController = new CommonController();
if (array_key_exists("dberror", $conn)) {
    exit("You are not connected to the database!!");
}
$ConfigDetails = $CommonController->getconfigurationoption($conn, "1");
$LicenseIS = isset($ConfigDetails["license"]) && $ConfigDetails["license"] != "" ? $ConfigDetails["license"] : "";
$LicenseLocalKey = isset($ConfigDetails["localKey"]) && $ConfigDetails["localKey"] != "" ? $ConfigDetails["localKey"] : "";
$ValidLicense = "";
if ($LicenseIS != "") {
    $checkLicense = $CommonController->checklicense($LicenseIS, $LicenseLocalKey);
    if ($checkLicense["status"] == "Active") {
        $ValidLicense = $checkLicense["status"];
        if (isset($checkLicense["localkey"]) && !empty($checkLicense["localkey"])) {
            $updateLocalKey = $CommonController->updatelocalkey($checkLicense["localkey"], $conn);
        }
    }
}
if ($ValidLicense != "Active") {
    echo "<script>window.location.href = 'dashboard.php';</script>";
    exit;
}
$titleis = "UNBLOCK IP's";
$dispatcher = new AdminContoller();
$dispatcher->dispatch("createallrecommendedtables", $conn);
$checkadminlogin = $dispatcher->dispatch("checkadminlogin");
if ($checkadminlogin != "1") {
    echo "<script>window.location.href = 'index.php';</script>";
    exit;
}
$CommonController->addActivityOnload($conn);
$LogoIs = isset($ConfigDetails["logo"]) && $ConfigDetails["logo"] != "" ? $ConfigDetails["logo"] : "../images/blackdemo-Logo.jpg";
$SitetileIs = isset($ConfigDetails["sitetitle"]) && $ConfigDetails["sitetitle"] != "" ? $ConfigDetails["sitetitle"] : "";
$portalslinks = isset($ConfigDetails["portallinks"]) && $ConfigDetails["portallinks"] != "" ? $ConfigDetails["portallinks"] : "";
$FportalLinks = [""];
if ($portalslinks != "") {
    $FportalLinks = unserialize($portalslinks);
}
$ValidPortalLink = "";
$PortalData = [];
if (isset($_GET["p"]) && $_GET["p"] != "") {
    $ActualID = base64_decode($_GET["p"]);
    $checkResponse = $CommonController->getWorkingTestlineByListID($conn, $ActualID);
    if ($checkResponse["result"] == "success") {
        $ValidPortalLink = "true";
        $PortalData["portallink"] = $checkResponse["portallink"];
    }
}
if ($ValidPortalLink == "") {
    echo "<script>window.location.href = 'blockcontent.php';</script>";
    exit;
}
$paranset = ["title" => "BLOCK CONTENT", "activemenu" => "BLOCKCONTENT", "logovalue" => $LogoIs, "breadcrumblink" => "blockcontent.php", "license" => $ValidLicense];
if (isset($_POST["blockedids"])) {
    $ExplodedIDS = explode(",", $_POST["blockedids"]);
    $DeleteBlockedIdsWithIdsArray = $CommonController->DeleteBlockedIdsWithIdsArray($ExplodedIDS, $conn);
    if ($DeleteBlockedIdsWithIdsArray == "1") {
        echo "      <script type=\"text/javascript\">\n        localStorage.setItem(\"deletesuccess\", \"yes\");\n        window.location.href = \"unblockip.php\";\n      </script>  \n      ";
        exit;
    }
}
$SectionAre = ["Live" => "live", "Movies" => "movies", "Series" => "series", "Catch UP" => "catchup", "Radio" => "radio"];
if (!in_array($_GET["sec"], $SectionAre)) {
    echo "<script>window.location.href = 'block-list.php?p=" . $_GET["p"] . "';</script>";
    exit;
}
$BackUPdata = "explore-block.php?p=" . $_GET["p"];
$DecodedCateGory = "";
if (isset($_GET["cate"]) && !empty($_GET["cate"])) {
    $DecodedCateGory = base64_decode($_GET["cate"]);
    $BackUPdata = "explore-block.php?p=" . $_GET["p"] . "&sec=" . $_GET["sec"];
}
$dispatcher->dispatch("mainheader", $paranset);
$dispatcher->dispatch("mainsidebar", $paranset);
echo "\n<style type=\"text/css\">\n\n/* toggle css start here*/\n/*.onoffswitch {\n    position: relative; width: 80px;\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\n}\n.onoffswitch-checkbox {\n    display: none;\n}\n.onoffswitch-label {\n    display: block; overflow: hidden; cursor: pointer;\n    border: 2px solid #E3E3E3; border-radius: 36px;\n}\n.onoffswitch-inner {\n    display: block; width: 200%; margin-left: -100%;\n    transition: margin 0.3s ease-in 0s;\n}\n.onoffswitch-inner:before, .onoffswitch-inner:after {\n    display: block; float: left; width: 50%; height: 36px; padding: 0; line-height: 36px;\n    font-size: 15px; color: white; font-family: Trebuchet, Arial, sans-serif; font-weight: bold;\n    box-sizing: border-box;\n}\n.onoffswitch-inner:before {\n    content: \"\";\n    padding-left: 10px;\n    background-color: #FFFFFF; color: #FFFFFF;\n}\n.onoffswitch-inner:after {\n    content: \"\";\n    padding-right: 10px;\n    background-color: #FFFFFF; color: #666666;\n    text-align: right;\n}\n.onoffswitch-switch {\n    display: block; width: 28px; margin: 4px;\n    background: #A1A1A1;\n    position: absolute; top: 0; bottom: 0;\n    right: 40px;\n    border: 2px solid #E3E3E3; border-radius: 36px;\n    transition: all 0.3s ease-in 0s; \n}\n.onoffswitch-checkboxchecked + .onoffswitch-label .onoffswitch-inner {\n    margin-left: 0;\n}\n.onoffswitch-checkboxchecked + .onoffswitch-label .onoffswitch-switch {\n    right: 0px; \n    background-color: #27A1CA; \n}*/\n.user-status-td{\n  position: relative;\n}\n.user-status{\n  position: absolute;\n  top: 25%;\n}\n\n\nspan.commonidentifire {\n    padding: 0px 6px;\n    border-radius: 45px;\n}\nspan.active-identifire {\n  background-color: #27a1ca;\n}\nspan.blocked-identifire {\n  background-color: #a1a1a1;\n}\n.searchfiltercontainer\n{\n    margin-bottom: 20px;\n}\n.btncontainersec\n{\n    text-align: right;\n}\n.searchfilterbtn {\n    color: #fff !important;\n}\n.eyeicon\n{\n  cursor :pointer;\n}\n.portalcontianers {\n    text-align: center;\n}\n\n.showaddtestlinebutton\n{\n  text-decoration: underline;\n      color: #3085d6;\n}\n.showaddtestlinebutton:hover\n{\n  text-decoration: none;\n  color: #6c8cab;\n}\n.MainSections {\n    width: 18%;\n    float: left;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    margin: 10px;\n    padding: 15px 0;\n    cursor: pointer;\n}\n.initialsettingcontainer {\n    margin-top: 10px;\n    border: 1px solid #cccc;\n    padding: 10px;\n    border-radius: 8px;\n}\n\n\ninput[type=checkbox]{\n  height: 0;\n  width: 0;\n  visibility: hidden;\n}\n\nlabel {\n  cursor: pointer;\n  text-indent: -9999px;\n  width: 100px;\n  height: 50px;\n  background: grey;\n  display: block;\n  border-radius: 100px;\n  position: relative;\n  left: 45px;\n  top: 12px;\n}\n\nlabel:after {\n  content: '';\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 45px;\n  height: 45px;\n  background: #fff;\n  border-radius: 90px;\n  transition: 0.3s;\n}\n\ninput:checked + label {\n  background: red;\n}\n\ninput:checked + label:after {\n  left: calc(100% - 0px);\n  transform: translateX(-100%);\n}\n\nlabel:active:after {\n  width: 130px;\n}\n.section-title{\n  text-align: center;\n  padding: 15px;\n  font-size: 24px;  \n}\n.section-card:hover{\n  cursor: pointer;\n}\n.title-info{\n  position: absolute;\n  left: 28%;\n  font-weight: 500;\n}\n.inner-common {\n    padding: 15px 10px;\n    margin: 5px 0px;\n    text-align: left;\n    border: 1px solid;\n}\na.explorecategories {\n    text-decoration: none;\n    background: #1db31d;\n    color: white;\n    padding: 5px;\n    border-radius: 12px;\n    font-size: 10px;\n    position: relative;\n    top: 12px;\n    left: 40px;\n}\na.explorecategories:hover {\n    background: #0c6f0c;\n}\n.onblockswitch\n{\n    width: 70px !important;\n    height: 30px !important;\n    top: 10px !important;\n    left: 20px !important;\n\n}\n.onblockswitch:after\n{\n       width: 25px !important;\n    height: 25px !important;\n}\n.blockbtncontainer {\n    display: inline-block;\n}\nspan.text-containeris {\n    position: relative;\n    top: 12px;\n    left: 25px;\n}\n\n\n#streamexploresec .modal-dialog\n{\n      max-width: 80% !important;\n}\nbutton.btn.btn-link {\n    width: 100%;\n}\n.col-md-12.episodeselectior {\n    border-bottom: 1px solid ;\n    margin: 5px !important;\n    padding: 10px;\n}\n.playercheckdiv {\n    display: flex;\n}\n.externallink-field {\n    display: flex;\n    margin: 10px 5px;\n    position: relative;\n}\n.externallinkshow{\n  cursor: pointer;\n}\n.addborder{\n  border:1px solid #dc3545;\n}\n.delExternal {\n    position: absolute;\n    top: 14%;\n    right: 13%;\n    font-size: 25px;\n    cursor: pointer;\n    color:#dc3545;\n}\n</style>\n\n    <main class=\"app-content\">\n      <div class=\"app-title\">\n        <div>\n          <h1><i class=\"fa fa-id-card-o\"></i> ";
echo $paranset["title"];
echo "</h1>\n          <p>";
echo $paranset["title"];
echo "</p>\n        </div>\n        <ul class=\"app-breadcrumb breadcrumb\">\n          <li class=\"breadcrumb-item\"><a href=\"dashboard.php\"><i class=\"fa fa-home fa-lg\"></i></a></li>\n          <li class=\"breadcrumb-item\"><a href=\"blockcontent.php\">";
echo $paranset["title"];
echo "</a></li>\n        </ul>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"tile\">\n            <h4 class=\"tile-title\">\n              <a href=\"";
echo $BackUPdata;
echo "\" class=\"btn btn-primary\">Back</a>\n              <span class=\"title-info\">\n                BLOCK CONTENT OF \n              <b style=\"text-decoration: underline;\">\n                ";
$PortalLINKGET = isset($PortalData["portallink"]) && !empty($PortalData["portallink"]) ? $PortalData["portallink"] : "";
$SectionName = array_search($_GET["sec"], $SectionAre);
echo $PortalLINKGET;
$FullBlocked = $CommonController->GetBlockedDataByPortalLInk($conn, $PortalLINKGET);
echo "              </b>\n              </span>\n            </h4>\n            <div class=\"tile-body\">\n              <div class=\"portalcontianers\">\n                ";
if ($_GET["cate"]) {
    echo "                    <center><h2>";
    echo $SectionName;
    echo " (Category: <span id=\"cateNameis\"></span>)</h2></center>\n                  ";
} else {
    echo "                  <center><h2>";
    echo $SectionName;
    echo " Categories</h2></center>\n                  ";
}
echo "                \n                <div class=\"container\">\n                  <div class=\"row\" style=\"margin-top: 20px;\" id=\"appendDataforCategories\">\n                    <div class=\"col-md-12\">\n                        <p style=\"font-size: 20px;\">Loading ";
echo $DecodedCateGory == "" ? "Categories" : $_GET["sec"];
echo ".....</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"clearix\"></div>\n      </div>\n    </main>\n\n\n\n\n  \n";
$dispatcher->dispatch("mainfooter");
echo "<script src='https://content.jwplatform.com/libraries/fgbTqCCh.js'></script>\t\n<script src='../assets/js/flowplayer/flowplayer.js'></script>\t\n<link rel=\"stylesheet\" href=\"../assets/js/flowplayer/skin/skin.css\" media=\"screen\">\n";
if ($DecodedCateGory == "") {
    echo "<script type=\"text/javascript\">\n  \$(document).ready(function(){\n    jQuery.ajax({\n          type:\"POST\",\n          url:\"includes/ajax-control.php\",\n          dataType:\"text\",\n          data:{\n          action:'GetCateGoriesForBlockConntent',\n          section:'";
    echo $_GET["sec"];
    echo "',\n          listid:'";
    echo isset($ActualID) && !empty($ActualID) ? $ActualID : "";
    echo "'\n          },  \n          success:function(response){\n            if(response != \"\")\n            {\n                \$(\"#appendDataforCategories\").html(\"\");\n                \$(\"#appendDataforCategories\").html(response);\n            }\n            \$(\".ex_cate\").bind(\"click\", function(e){\n                e.preventDefault();\n                RedirectLink = \$(this).attr(\"href\");\n                CateGoryName = \$(this).data(\"cateforlocal\");\n                localStorage.setItem(\"blockcategorynameis\", CateGoryName);\n                window.location.href = RedirectLink;\n            });\n            \$(\".blockcatsecbtn\").bind(\"click\", function(e){\n                e.preventDefault();\n                thisVarIs = \$(this);\n                secttionis = \$(this).data(\"rowid\");\n                nameselector = \$(this).data(\"nameselector\");\n                currentis = \$(this).data(\"currentis\");\n                categoryidis = \$(this).data(\"categoryidis\");\n                TextData = \"active\";\n                AjaxRetunTextData = \"Actived\";\n                if(currentis == 0)\n                {\n                  TextData = \"block\";\n                  AjaxRetunTextData = \"Blocked\";\n                }\n                Swal.fire({\n                  title: 'Are you sure?',\n                  html: \"You want to \"+TextData+\" <b style='text-decoration:underline;font-weight: bold;'>\"+nameselector+\"</b> category!!\",\n                  type: 'warning',\n                  showCancelButton: true,\n                  confirmButtonColor: '#3085d6',\n                  cancelButtonColor: '#d33',\n                  confirmButtonText: 'Yes, go for it!'\n                }).then((result) => {\n                  if (result.value) {\n                    swal.close();\n                    Swal.fire({\n                      text: \"Processing.....\",\n                      allowOutsideClick: false,\n                      showCancelButton: false,\n                      showConfirmButton: false\n                    });  \n                     jQuery.ajax({\n                        type:\"POST\",\n                        url:\"includes/ajax-control.php\",\n                        dataType:\"text\",\n                        data:{\n                        action:'blockCategory',\n                        secttionis:secttionis,\n                        currentis:currentis,\n                        categoryidis:categoryidis,\n                        portallink:'";
    echo isset($PortalData["portallink"]) && !empty($PortalData["portallink"]) ? $PortalData["portallink"] : "";
    echo "'\n                        },  \n                        success:function(response){\n                        \n                          swal.close();\n                          if(response != \"\")\n                          {\n                            if(currentis == 0)\n                            {\n                                thisVarIs.data(\"currentis\",\"1\");\n                                \$(\".exploreBtnNo-\"+categoryidis).addClass(\"d-none\");\n                                thisVarIs.prop(\"checked\",true);\n                            }\n                            else\n                            {\n                                thisVarIs.data(\"currentis\",\"0\");  \n                                \$(\".exploreBtnNo-\"+categoryidis).removeClass(\"d-none\");\n                                thisVarIs.prop(\"checked\",false);\n                            }\n                          }\n                        }\n                      });             \n                  }\n                })\n            });\n          }\n      });\n  });\n \n</script>\n";
} else {
    echo "   <!-- Modal Stream explore -->\n    <div class=\"modal fade\" id=\"streamexploresec\" role=\"dialog\" data-backdrop=\"static\" data-keyboard=\"false\">\n      <div class=\"modal-dialog\">\n      \n        <!-- Modal content-->\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <b class=\"modal-title\"><span id=\"idforheading\"></span></b>\n          </div>\n          <div class=\"modal-body\" id=\"explorebody\">\n            <center><p class=\"modal-loader\">Loading Data...</p></center>\n          </div>\n          <div class=\"modal-footer\">\n            <div class=\"mr-auto\">\n              <strong class=\"text-danger\">Note: </strong><small> Please Enter your own External link if XtreamCode Stream link is not working or have audio/video Codec issues!!</small>\n            </div>\n          \t<button class=\"btn btn-primary d-none\" id=\"BackToInfoBttn\">Back To Info</button>\n            <button type=\"button\" class=\"btn btn-danger\" id=\"closeexploremodel\" data-dismiss=\"modal\" disabled>Close</button>\n          </div>\n        </div>\n        \n      </div>\n    </div>\n  <script type=\"text/javascript\">\n    \$(document).ready(function(){\n        blockcategorynameis = localStorage.getItem(\"blockcategorynameis\");\n        \$(\"#cateNameis\").text(blockcategorynameis);\n        jQuery.ajax({\n          type:\"POST\",\n          url:\"includes/ajax-control.php\",\n          dataType:\"text\",\n          data:{\n          action:'GetStreamsByCategoryAndSecForBlock',\n          section:'";
    echo $_GET["sec"];
    echo "',\n          listid:'";
    echo isset($ActualID) && !empty($ActualID) ? $ActualID : "";
    echo "',\n          cate:'";
    echo base64_decode($_GET["cate"]);
    echo "'\n          },  \n          success:function(response){\n          \tif(response != \"\")\n            {\n                \$(\"#appendDataforCategories\").html(\"\");\n                \$(\"#appendDataforCategories\").html(response);\n                \$(\".ex_streams\").bind(\"click\", function(e){\n                    e.preventDefault();\n                    \$(\"#closeexploremodel\").prop(\"disabled\",true);\n                    \$(\"#explorebody\").html('');\n                    \$(\"#explorebody\").html('<center><p class=\"modal-loader\">Loading Data...</p></center>');\n                    StreamIDis = \$(this).data(\"streamidtoexplore\");\n                    listid = \$(this).data(\"listid\");\n                    categoryIs = \$(this).data(\"categorystreams\");\n                    sectionIs = \$(this).data(\"sectype\");\n                    streamname = \$(this).data(\"streamname\");\n                    \$(\"#idforheading\").text(streamname.toUpperCase());\n                    \$(\"#streamexploresec\").modal(\"show\");\n                    jQuery.ajax({\n                        type:\"POST\",\n                        url:\"includes/ajax-control.php\",\n                        dataType:\"text\",\n                        data:{\n                        action:'getStreamDataExplore',\n                        StreamIDis:StreamIDis,\n                        listid:listid,\n                        categoryIs:categoryIs,\n                        sectionIs:sectionIs,\n                        streamname:streamname\n                        },  \n                        success:function(response){\n                          \$(\"#closeexploremodel\").prop(\"disabled\",false);\n                          \$(\"#explorebody\").html(\"\");\n                          \$(\"#explorebody\").html(response);\n\t\t\t\t\t\t  \$(\".CheckplayerBtn\").bind(\"click\", function(e){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tuniqueselector = \$(this).data(\"uniqueselector\");\n\t\t\t\t\t\t\tPlayableLink = \$(this).data(\"playlinktocheck\");\n\t\t\t\t\t\t\tPlayerInCheck = \$(\".PlayerCheckSec-\"+uniqueselector).val();\n\t\t\t\t\t\t\t\$(\"#maininformationsec\").addClass(\"d-none\");\n\t\t\t\t\t\t\t\$(\"#closeexploremodel\").addClass(\"d-none\");\n\t\t\t\t\t\t\t\$(\"#player-sectionis\").removeClass(\"d-none\");\n\t\t\t\t\t\t\t\$(\"#BackToInfoBttn\").removeClass(\"d-none\");\n\t\t\t\t\t\t\tif(PlayerInCheck == \"JW player\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar player = jwplayer('playerholder');\n\t\t\t\t\t\t\t\tplayer.setup({\n\t\t\t\t\t\t          \"file\": PlayableLink,\n\t\t\t\t\t\t          \"width\":\"100%\",\n\t\t\t\t\t\t          \"aspectratio\": \"16:9\"              \n\t\t\t\t\t\t        });\n\t\t\t\t\t\t        player.on('setupError', function() {\n\t\t\t\t\t\t        \talert(\"Error in playing Streams!\");\n\t\t\t\t\t\t        });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(PlayerInCheck == \"Flow player\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar container = document.getElementById(\"playerholder\");\n\t\t\t\t\t\t\t\tvar flowPlayerH = flowplayer(container, {\n\t\t\t\t\t\t\t\t\tautoplay: true,\n\t\t\t\t\t\t\t  \t\taspectRatio: \"16:9\",\n\t\t\t\t\t\t\t\t    clip: {\n\t\t\t\t\t\t\t\t        sources: [\n\t\t\t\t\t\t\t\t              { type: \"video/mp4\",\n\t\t\t\t\t\t\t\t                src:  PlayableLink }\n\t\t\t\t\t\t\t\t        ]\n\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tflowplayer(container).load();\n\t\t\t\t\t\t\t\tflowPlayerH.on(\"error\", function (e, api, err) {\n\t\t\t\t\t\t\t\t\tif (err.code === 2 || err.code === 4) {\n\t\t\t\t\t\t\t\t\t\talert('Flow error will play here');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n                      \t  });\n                      \t  \$(\"#BackToInfoBttn\").bind(\"click\", function(e){\t\t\t\t\t\t\t\n              \t\t\t\t\t\t\tif(\$('#playerholder').hasClass('flowplayer'))\n              \t\t\t\t\t\t\t{\n              \t\t\t\t\t\t\t\tvar container = document.getElementById(\"playerholder\");\n              \t\t\t\t\t\t\t\tflowplayer(container).shutdown(); \n              \t\t\t\t\t\t\t}\n\n              \t\t\t\t\t\t\t\$('#playerholder').html('');\n\n              \t\t\t\t\t\t\t\$('#BackToInfoBttn').addClass('d-none');\n              \t\t\t\t\t\t\t\$(\"#player-sectionis\").addClass(\"d-none\");\n              \t\t\t\t\t\t\t\$(\"#maininformationsec\").removeClass(\"d-none\");\n              \t\t\t\t\t\t\t\$(\"#closeexploremodel\").removeClass(\"d-none\");\n              \t\t\t\t\t\t\tclearInt();\n                      \t  });\n                           \$(\".externallinkshow\").bind(\"click\", function(e){  \n                            var showids = \$(this).data('showid');\n                            \$('#myextrnal-'+showids).toggleClass('d-none');\n                           });\n\n                           \$(\".blockcatsecbtnseries\").bind(\"click\", function(e)\n                           {\n                              e.preventDefault();\n                              thisVarIs = \$(this);                \n                              categoryidis = \$(this).data(\"categoryidis\");\n                              seasonumber = \$(this).data(\"seasonum\");\n                              streamname = \$(this).data(\"streamname\");\n                              streamid = \$(this).data(\"streamid\");\n                              episodeid = \$(this).data(\"episodeid\");\n                              currentis = \$(this).data(\"currentis\");\n                              TextData = \"active\";\n                              AjaxRetunTextData = \"Actived\";\n                              if(currentis == 0)\n                              {\n                                TextData = \"block\";\n                                AjaxRetunTextData = \"Blocked\";\n                              }\n                              Swal.fire({\n                                title: 'Are you sure?',\n                                html: \"You want to \"+TextData+\" <b style='text-decoration:underline;font-weight: bold;'>\"+streamname+\"\\'s this episode!!</b>\",\n                                type: 'warning',\n                                showCancelButton: true,\n                                confirmButtonColor: '#3085d6',\n                                cancelButtonColor: '#d33',\n                                confirmButtonText: 'Yes, go for it!'\n                                }).then((result) => {\n                                if (result.value) {\n                                  swal.close();\n                                  Swal.fire({\n                                    text: \"Processing.....\",\n                                    allowOutsideClick: false,\n                                    showCancelButton: false,\n                                    showConfirmButton: false\n                                  });  \n                                   jQuery.ajax({\n                                      type:\"POST\",\n                                      url:\"includes/ajax-control.php\",\n                                      dataType:\"text\",\n                                      data:{\n                                      action:'blockseriesEpisodes',\n                                      categoryidis:categoryidis,\n                                      seasonumber:seasonumber,\n                                      streamname:streamname,\n                                      streamid:streamid,\n                                      episodeid:episodeid,\n                                      currentis:currentis,\n                                      portallink:'";
    echo isset($PortalData["portallink"]) && !empty($PortalData["portallink"]) ? $PortalData["portallink"] : "";
    echo "'\n                                      },  \n                                      success:function(response){\n                                      \n                                        swal.close();\n                                        if(response != \"\")\n                                        {\n                                          if(currentis == 0)\n                                          {\n                                              thisVarIs.data(\"currentis\",\"1\");\n                                              \$(\".linkfor-\"+episodeid).addClass(\"d-none\");\n                                              thisVarIs.prop(\"checked\",true);\n                                          }\n                                          else\n                                          {\n                                              thisVarIs.data(\"currentis\",\"0\");  \n                                              \$(\".linkfor-\"+episodeid).removeClass(\"d-none\");\n                                              thisVarIs.prop(\"checked\",false);\n                                          }\n                                        }\n                                      }\n                                    });             \n                                }\n                            })\n                        });\n                        \$('.extrernalsubmit').bind(\"click\", function(ev)\n                        {\n                          var thisidis = \$(this);                         \n                          var categoryidis  = \$(this).data('categoryidis');\n                          var seasonum  = \$(this).data('seasonum');\n                          var streamname  = \$(this).data('streamname');\n                          var streamid  = \$(this).data('streamid');\n                          var type  = \$(this).data('type');\n                          var episodeid  = \$(this).data('episodeid');\n                          if(type == 'series'){\n                            extLink = \$('#externallink-'+episodeid).val();\n                          }\n                          if(type == 'movies'){\n                            extLink = \$('#externallink-'+streamid).val();\n                          }\n                          if(extLink == \"\")\n                          {\n                            if(type == 'series'){\n                              \$('#externallink-'+episodeid).addClass('addborder');\n                              ev.preventDefault();\n                            }\n                            if(type == 'movies'){\n                              \$('#externallink-'+streamid).addClass('addborder');\n                              ev.preventDefault();\n                            }                           \n                            \n                          }\n                          else\n                          {                            \n                            valid = ValidURL(extLink);\n                            youtubecheck = matchYoutubeUrl(extLink);\n                            if(valid == false){\n                              Swal.fire({\n                                  position: 'center',\n                                  type: 'error',\n                                  title: 'Please enter Valid url link !!',\n                                  showConfirmButton: false,\n                                  timer: 1500\n                              })\n                              \$('#externallink-'+episodeid).addClass('addborder');\n                               ev.preventDefault();\n                            }\n                            else\n                            {\n                              if(youtubecheck == true){\n                                Swal.fire({\n                                  position: 'center',\n                                  type: 'error',\n                                  title: 'YouTube link is not allowed !!',\n                                  showConfirmButton: false,\n                                  timer: 1500\n                                })\n                                \$('#externallink-'+episodeid).addClass('addborder');\n                                ev.preventDefault();\n                              }else{\n                                Swal.fire('Saving ...');\n                                Swal.showLoading();\n                                jQuery.ajax({\n                                    type:\"POST\",\n                                    url:\"includes/ajax-control.php\",\n                                    dataType:\"text\",\n                                    data:{\n                                    action:'saveExternalink',\n                                    categoryidis:categoryidis,\n                                    seasonumber:seasonum,\n                                    streamname:streamname,\n                                    streamid:streamid,\n                                    episodeid:episodeid,\n                                    type:type,\n                                    extLink:extLink,\n                                    portallink:'";
    echo isset($PortalData["portallink"]) && !empty($PortalData["portallink"]) ? $PortalData["portallink"] : "";
    echo "'\n                                    },  \n                                    success:function(response){\n                                      if(response == \"1\"){\n                                        Swal.fire({\n                                          position: 'center',\n                                          type: 'success',\n                                          title: 'Link Save Successfully!!',\n                                          showConfirmButton: false,\n                                          timer: 1500\n                                        })\n                                        if(type == 'movies'){\n                                          \$('.delcheck-'+streamid).removeClass('d-none');\n                                          \$(thisidis).text('Change External Link');\n                                        }else{\n                                            \$('.delcheck-'+episodeid).removeClass('d-none');\n                                            \$('.linkfor-'+episodeid).addClass('text-danger');\n                                            \$(thisidis).text('Change Link');\n                                        }\n                                       \n                                      }else{\n                                        Swal.fire({\n                                          position: 'center',\n                                          type: 'error',\n                                          title: 'Sorry! error in saving External link!!',\n                                          showConfirmButton: false,\n                                          timer: 1500\n                                        })\n                                      }\n                                    }\n                                });\n                              }\n                              \n                            }\n                          }\n                        });\n                        \$('.delExternal').bind(\"click\", function(ev){\n                            var thisidis = \$(this);\n                            var delcategoryidis  = \$(this).data('categoryidis');\n                            var delseasonum  = \$(this).data('seasonum');\n                            var delstreamid  = \$(this).data('streamid');\n                            var deltype  = \$(this).data('type');\n                            var delepisodeid  = \$(this).data('episodeid');\n                            \n                            ev.preventDefault();\n                            Swal.fire('Deleting ...');\n                                Swal.showLoading();\n                                jQuery.ajax({\n                                    type:\"POST\",\n                                    url:\"includes/ajax-control.php\",\n                                    dataType:\"text\",\n                                    data:{\n                                    action:'deleteExternalink',\n                                    delcategoryidis:delcategoryidis,\n                                    delseasonum:delseasonum,\n                                    delstreamid:delstreamid,\n                                    deltype:deltype,\n                                    delepisodeid:delepisodeid,\n                                    portallink:'";
    echo isset($PortalData["portallink"]) && !empty($PortalData["portallink"]) ? $PortalData["portallink"] : "";
    echo "'\n                                    },  \n                                    success:function(response){\n                                      console.log(response);\n                                      if(response == \"1\"){\n                                        Swal.fire({\n                                          position: 'center',\n                                          type: 'success',\n                                          title: 'Link Delete Successfully!!',\n                                          showConfirmButton: false,\n                                          timer: 1500\n                                        })\n                                        if(deltype == 'series'){\n                                            \$('.delcheck-'+delepisodeid).addClass('d-none');\n                                            \$('#externallink-'+delepisodeid).val('');\n                                            \$('.linkfor-'+delepisodeid).removeClass('text-danger');\n                                        }\n                                        if(deltype == 'movies'){\n                                           \$('.delcheck-'+delstreamid).addClass('d-none');\n                                           \$('#externallink-'+delstreamid).val('');\n                                           \n                                        }\n                                       \n                                      }else{\n                                        Swal.fire({\n                                          position: 'center',\n                                          type: 'error',\n                                          title: 'Sorry! error in deleting External link!!',\n                                          showConfirmButton: false,\n                                          timer: 1500\n                                        })\n                                      }\n                                    }\n                                });\n                        });\n\n                \n                    }  \n                });  \n\n                });\n                \$(\".blockcatsecbtn\").bind(\"click\", function(e){\n                  e.preventDefault();\n                  thisVarIs = \$(this);\n                  secttionis = \$(this).data(\"rowid\");\n                  nameselector = \$(this).data(\"nameselector\");\n                  currentis = \$(this).data(\"currentis\");\n                  streamidtoadd = \$(this).data(\"streamidtoadd\");\n                  TextData = \"active\";\n                  AjaxRetunTextData = \"Actived\";\n                  if(currentis == 0)\n                  {\n                    TextData = \"block\";\n                    AjaxRetunTextData = \"Blocked\";\n                  }\n                  Swal.fire({\n                    title: 'Are you sure?',\n                    html: \"You want to \"+TextData+\" <b style='text-decoration:underline;font-weight: bold;'>\"+nameselector+\"</b>!!\",\n                    type: 'warning',\n                    showCancelButton: true,\n                    confirmButtonColor: '#3085d6',\n                    cancelButtonColor: '#d33',\n                    confirmButtonText: 'Yes, go for it!'\n                  }).then((result) => {\n                  if (result.value) {\n                        swal.close();\n                        Swal.fire({\n                          text: \"Processing.....\",\n                          allowOutsideClick: false,\n                          showCancelButton: false,\n                          showConfirmButton: false\n                        });\n                        jQuery.ajax({\n                          type:\"POST\",\n                          url:\"includes/ajax-control.php\",\n                          dataType:\"text\",\n                          data:{\n                          action:'blockStreams',\n                          secttionis:secttionis,\n                          currentis:currentis,\n                          streamidtoadd:streamidtoadd,\n                          categroyid:'";
    echo base64_decode($_GET["cate"]);
    echo "',\n                          portallink:'";
    echo isset($PortalData["portallink"]) && !empty($PortalData["portallink"]) ? $PortalData["portallink"] : "";
    echo "'\n                          },  \n                          success:function(response){\n                            swal.close();\n                            if(response != \"\")\n                            {\n                              swal.close();\n                              if(response != \"\")\n                              {\n                                if(currentis == 0)\n                                {\n                                    thisVarIs.data(\"currentis\",\"1\");\n                                    \$(\".exploreBtnNo-\"+streamidtoadd).addClass(\"d-none\");\n                                    thisVarIs.prop(\"checked\",true);\n                                }\n                                else\n                                {\n                                    thisVarIs.data(\"currentis\",\"0\");  \n                                    \$(\".exploreBtnNo-\"+streamidtoadd).removeClass(\"d-none\");\n                                    thisVarIs.prop(\"checked\",false);\n                                }\n                              }                              \n                            }\n                          }\n                        });             \n                      }\n                  })\n                });\n\n                \n            }\n          }\t\n\t\t  });\n    });\n\tfunction clearInt()\n\t{\n\t  if(typeof inT === 'undefined')\n\t  {\n\n\t  }\n\t  else\n\t  {\n\t    clearInterval(inT);\n\t    clearInterval(init);\n\t  }\n\n\t}\n\n  function ValidURL(str) {\n  var regex = /(http|https):\\/\\/(\\w+:{0,1}\\w*)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%!\\-\\/]))?/;\n  if(!regex .test(str)) {\n    return false;\n  } else {\n    return true;\n  }\n}\nfunction matchYoutubeUrl(url) {\n    var p = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?\$/;\n    if(url.match(p)){\n        return true;\n    }\n    return false;\n}\n  </script>\n  ";
}
echo "\n";

?>